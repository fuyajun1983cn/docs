#+TITLE: SDIO Spec V3.0要点记录

* 概述

** 定义

*** SDIO Card
    SDIO卡是一种使用SD总线和SD命令集的可插拔的产品。

*** Embedded SDIO
    嵌入式SDIO卡也是一种使用SD总线和SD命令集的产品，它是固定焊接在PCB
    板子上的，用户是不能移除的。

** SDIO特征

*** 共同特征
    1. 面向可移动或固定的应用。
    2. 对SD物理总线不需要或只要很小的改动。
    3. 对内存初始化序列只需要很小改动。
    4. 支持多功能，包含多重I/O, 组合I/O以及内容存储。
    5. 一张卡可以支持多达7个I/O功能加一个内存功能。
    6. 支持通过中断请求主机服务某个事件。
    7. 通过Tuples提供卡信息。

*** SDIO 卡特征
    1. 供电电压范围：2.7V ~ 3.6V（可操作电压主要用于初始化）
    2. 即插即用支持。
    3. 多种形式
       - 标准大小的SDIO卡
       - miniSDIO
       - microSDIO
    4. 每个卡槽连接一个SDIO卡。

*** 嵌入式SDIO设备的特征
    1. 供电电压范围：2.7V ~ 3.6V或1.7V ~ 1.95V。
    2. 不可插拔。
    3. 支持任何形态和任何PIN脚本布局。
    4. Bus连接可共享。

** 标准的SDIO功能
    SDIO的特征是通过某个SDIO功能来决定的。驱动和应用程序需要控制SDIO的
    功能。有两种SDIO功能类型：标准SDIO功能和非标准SDIO功能。

    标准功能包含摄像头，蓝牙，以及GPS。 它们拥有标准的寄存器接口， 通
    用的操作方法以及标准的CIS扩展。 通过为某个特定的功能定义标准的寄存
    器接口，操作系统就可以为该功能提供标准的卡驱动，应用软件和API。 而
    非标准的功能则需要用户单独安装卡驱动，应用软件来使用非标准的SDIO功
    能。非标准功能是可选的，一般厂商需要实现标准功能。

    [[./images/001.png]]

* SDIO信号定义

** 卡类型
    本规范定义了两种类型的SDIO卡：
    1. 全速卡
       
       支持SPI， 1-bit, 4-bit传输模式。 时钟范围: 0 ~ 25MHz。 传输速率
       超过 100Mb/s(10MB/s)。

    2. 低速卡

       只要求支持SPI, 1-bit传输模式，4-bit传输模式是可选的。时钟范围:
       0 ~ 400 KHz。 

    如果卡的类型是Combo（memory + SDIO）， 则必须是全速卡，且4-bit模式
    是必须支持的。

** SDIO卡模式 
    总共定义了3种总线模式。

*** SPI(必须支持)
    pin 8用于中断引脚。

*** 1-bit模式（必须支持）
    数据传输只使用DAT[0]引脚， pin 8用于中断引脚。pin 9用于读取等待引
    脚。

*** 4-bit模式（高速卡必须支持，低速卡可以不支持）
    数据传输在所有的数据引脚上进行DAT[0:3]。 没有独占使用的中断引脚，

** SDIO主机模式
    一般建议主机要同时支持1-bit和4-bit模式。

** 信号引脚

*** SDIO卡的信号引脚

    [[./images/002.png
]]
    PIN脚的定义如下 所示：
    
    [[./images/003.png]]

    访问CCCR里面的总线接口控制寄存器来判定DAT线的模式。

* SDIO Card Initialization
  
